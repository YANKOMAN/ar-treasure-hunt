<!DOCTYPE html>
<html>
  <head>
    <title>La CAN des Tr√©sors AR</title>
    <!-- A-Frame and AR.js -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.2.1/aframe/build/aframe-ar.js"></script>

    <style>
      body { margin: 0; overflow: hidden; font-family: sans-serif; }
      #message { 
        position: absolute; top: 10px; left: 10px; 
        background: rgba(0,0,0,0.7); color: #fff; 
        padding: 10px; border-radius: 5px;
      }
    </style>
  </head>

  <body>
    <!-- Progress message -->
    <div id="message">Trouvez tous les objets AR !</div>

    <!-- AR scene -->
    <a-scene embedded arjs>
      <!-- Marker 1: Ballon -->
      <a-marker id="marker-ballon" type="pattern" url="ballon.patt">
        <a-sphere color="yellow" radius="0.3" position="0 0.3 0"></a-sphere>
      </a-marker>

      <!-- Marker 2: Mascotte -->
      <a-marker id="marker-mascotte" type="pattern" url="mascotte.patt">
        <a-box color="red" depth="0.3" height="0.3" width="0.3" position="0 0.15 0"></a-box>
      </a-marker>

      <!-- Marker 3: Troph√©e -->
      <a-marker id="marker-trophee" type="pattern" url="trophee.patt">
        <a-cone color="green" radius-bottom="0.3" height="0.5" position="0 0.25 0"></a-cone>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      // Track found markers
      let foundMarkers = {};

      // Update the message
      function updateMessage() {
        const keys = Object.keys(foundMarkers);
        const messageEl = document.getElementById('message');

        if (keys.length === 3) {
          messageEl.innerHTML = "Bravo ! Vous avez trouv√© tous les objets üéâ";
        } else {
          messageEl.innerHTML = `Objets trouv√©s : ${keys.length}/3`;
        }
      }

      // Listen for marker found events
      document.querySelectorAll('a-marker').forEach(marker => {
        marker.addEventListener('markerFound', () => {
          const id = marker.getAttribute('id');
          foundMarkers[id] = true;
          updateMessage();
        });
      });
    </script>
  </body>
</html>
